# 使用pandas库来操作数据

## 1.Transforming Data

### 1.1 pandas的DataFrame数据格式有以下几种浏览方式，在进行数据分析之前可以粗略浏览：

- `.head()` returns the first few rows (the “head” of the DataFrame).

- `.info()` shows information on each of the columns, such as the data type and number of missing values.

- `.shape` returns the number of rows and columns of the DataFrame.

- `.describe()` calculates a few summary statistics for each column.

### 1.2 pandas的DataFrame数据格式有以下几种常用属性：
- `.values`: A two-dimensional NumPy array of values.
- `.columns`: An index of columns: the column names.
- `.index`: An index for the rows: either row numbers or row names.

### 1.3 pandas排序和过滤方法

- `.sort_values()`是常用的排序方法。可以对单个值进行排序，也可以根据多个值进行排序。`df.sort_values("breed")` 和 `df.sort_values(["breed", "weight_kg"])`

- `.sort_values()`有参数`ascending=`。这里可以是单一的True和False，对于存在多个排序列时，可以用列表表示他们的排列顺序。比如`ascending=[True, False]`

- `.isin()`是一个非常简单的方法。尤其是再对一列进行筛选的时候。比如我们希望选择color列，而满足我们要求的颜色有brown, black, tan。我们可以使用.isin方法。代码如下：

  ```Python
  colors = ["brown", "black", "tan"]
  condition = dogs["color"].isin(colors) # 得到的是一个包含True和False的Series
  dogs[condition]
  ```

### 1.4  pandas的常用统计学和聚合方法

- 常用统计学方法：

1. `.mean()`函数可以对DataFrame的列进行求平均值计算

2. `.median()`函数可以对DataFram的列进行求中位数计算
3. `.min()`函数可以对DataFrame的列进行求最小值计算
4. `.max()`函数可以对DataFrame的列进行求最大值计算
5. `.quantile()`函数可以对DataFrame的列进行求四分位数计算
6. `.cummax()`返回一个DataFrame或Series轴上的累积最大值。
7. `.cumsum()`返回一个DataFrame或Series轴上的累积和。

- 聚合方法：

1. `.agg()`函数可以把函数放入参数，使得对DataFrame的列进行聚合的函数计算

   ```Python
   # A custom IQR function
   def iqr(column):
       return column.quantile(0.75) - column.quantile(0.25)
       
   # Print IQR of the temperature_c column
   print(sales['temperature_c'].agg(iqr))
   ```

   